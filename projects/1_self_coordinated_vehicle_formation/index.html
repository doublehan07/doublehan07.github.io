<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Self-coordinated Vehicle Formation | Han Zhang</title> <meta name="author" content="Han Zhang"> <meta name="description" content="Robots use UWB technology for self-coordinating positioning."> <meta name="keywords" content="robotics, dexmo, dexta robotics"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/tinker.png?c31e45d81044ea8d5a0fec8582c2e4ed"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://doublehan07.github.io/projects/1_self_coordinated_vehicle_formation/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Han </span>Zhang</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Self-coordinated Vehicle Formation</h1> <p class="post-description">Robots use UWB technology for self-coordinating positioning.</p> </header> <article> <h2 id="background">Background</h2> <p>This project was developed <code class="language-plaintext highlighter-rouge">from October 2015 to March 2017</code>, advised by <a href="http://oa.ee.tsinghua.edu.cn/~shenyuan/" rel="external nofollow noopener" target="_blank">Prof. Yuan Shen</a>.</p> <p>In September 2015, inspired by <a href="https://www.ted.com/talks/vijay_kumar_the_future_of_flying_robots" rel="external nofollow noopener" target="_blank">a TED Talk</a> and <a href="https://www.science.org/doi/abs/10.1126/science.1254295" rel="external nofollow noopener" target="_blank">this paper</a>, I became interested in swarm robotics.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/flying_robots-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/flying_robots-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/flying_robots-1400.webp"></source> <img src="/assets/img/project/svf/flying_robots.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="flying robots" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> <a href="https://www.ted.com/talks/vijay_kumar_the_future_of_flying_robots" rel="external nofollow noopener" target="_blank">TED Talk: The future of flying robots</a> </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/robot_swarm-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/robot_swarm-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/robot_swarm-1400.webp"></source> <img src="/assets/img/project/svf/robot_swarm.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="robot swarm" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> <a href="https://seas.harvard.edu/news/2014/08/self-organizing-thousand-robot-swarm?utm_source=youtube&amp;utm_medium=social&amp;utm_campaign=harvard-youtube" rel="external nofollow noopener" target="_blank">Programmable self-assembly in a thousand-robot swarm</a> </div> </div> </div> <p>The drone demo was pretty cool. However, it required OptiTrack for localization. In contrast, the self-assembly robot swarm did not require a base station for locating each node, though this limited the movement abilities of the inner nodes.</p> <p>After reading <a href="https://arxiv.org/pdf/1006.0890.pdf" rel="external nofollow noopener" target="_blank">this paper</a>, I came up with an idea for a self-coordinated robot system. <code class="language-plaintext highlighter-rouge">If each robot node could know the distance between any 2 nodes, all nodes would have enough information to calculate the group's formation.</code> This scheme eliminates the need for a base station.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/broadcast1-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/broadcast1-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/broadcast1-1400.webp"></source> <img src="/assets/img/project/svf/broadcast1.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Corporative Broadcast Ranging Algorithm" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/broadcast2-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/broadcast2-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/broadcast2-1400.webp"></source> <img src="/assets/img/project/svf/broadcast2.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Corporative Broadcast Ranging Algorithm" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/broadcast3-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/broadcast3-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/broadcast3-1400.webp"></source> <img src="/assets/img/project/svf/broadcast3.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Corporative Broadcast Ranging Algorithm" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/broadcast4-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/broadcast4-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/broadcast4-1400.webp"></source> <img src="/assets/img/project/svf/broadcast4.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Corporative Broadcast Ranging Algorithm" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> <strong>Cooporative Broadcast Ranging Algorithm.</strong> <br> After nodes A, B, C and D perform ranging using broadcast messages, all nodes receive sufficient information. </div> <p>To implement this idea, we chose ultra-wideband (UWB) wireless technology. Using <a href="https://www.qorvo.com/products/p/DWM1000" rel="external nofollow noopener" target="_blank">Decawave DWM1000 transceiver modules</a>, we were able to measure distances between two modules with millimeter precision. However, as no existing API was available in late 2015, we had to develop the measurement algorithms and communication protocols ourselves.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/robot1-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/robot1-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/robot1-1400.webp"></source> <img src="/assets/img/project/svf/robot1.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Our robot car at a glance" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/robot2-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/robot2-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/robot2-1400.webp"></source> <img src="/assets/img/project/svf/robot2.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Our robot car at a glance" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Our robot car at a glance. </div> <p>From October 2015 to May 2016, I developed the first version of this project, <code class="language-plaintext highlighter-rouge">handling the entire workload—including the circuit, mechanism, embedded system, ranging algorithm, and broadcast protocol—all by myself</code>, except for the motor driver which was designed by <a href="https://github.com/wengzhe" rel="external nofollow noopener" target="_blank">Zhe Weng</a>.</p> <p>From June 2016 to July 2016, <a href="https://ieeexplore.ieee.org/author/37086689078" rel="external nofollow noopener" target="_blank">Feng Ge</a> assisted with the Decawave protocols for the second version. Additionally, I redesigned the motor driver to a brand new version:)</p> <p>Subsequently, <a href="https://laixishi.github.io/" rel="external nofollow noopener" target="_blank">Laixi Shi</a>, <a href="https://wenhao.pub/" rel="external nofollow noopener" target="_blank">Wenhao Ding</a>, <a href="https://ieeexplore.ieee.org/author/37086546764" rel="external nofollow noopener" target="_blank">Tuopu Wen</a>, and <a href="https://junda.bi/" rel="external nofollow noopener" target="_blank">Junda Bi</a> joined and contributed to the final version.</p> <h2 id="brief-introduction-to-the-project">Brief Introduction to the Project</h2> <p>We use ultra-wideband (UWB) wireless technology to measure the distance between any two robot cars, eliminating the need for a base station to localize any car. The cars self-coordinate to determine their positions.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/svf-intro.gif-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/svf-intro.gif-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/svf-intro.gif-1400.webp"></source> <img src="/assets/img/project/svf/svf-intro.gif" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="svf demo" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> How it works. </div> </div> </div> <h2 id="demostrations-of-this-project">Demostrations of This Project</h2> <p>We broadcast the goal to every node, allowing them to determine their movements autonomously without remote control from central nodes or humans.</p> <h3 id="formation-change">Formation Change</h3> <p>The video below demostrates how the robot system transforms from a line into a rectangle shape.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/project/svf/formation_change.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" autoplay="" controls=""></video> </figure> </div> </div> <p>The images below show the robot system changing in size.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <div class="image-container" style="display: inline-block; position: relative;"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/shrink.gif-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/shrink.gif-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/shrink.gif-1400.webp"></source> <img src="/assets/img/project/svf/shrink.gif" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Shrink the size" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption" style="text-align: center; width: 100%; margin-top: 5px;"> The robot system shrinks in size. </div> </div> </div> <div class="col-sm mt-3 mt-md-0"> <div class="image-container" style="display: inline-block; position: relative;"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/expand.gif-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/expand.gif-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/expand.gif-1400.webp"></source> <img src="/assets/img/project/svf/expand.gif" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Expand the size" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption" style="text-align: center; width: 100%; margin-top: 5px;"> The robot system expands in size. </div> </div> </div> </div> <h3 id="maintain-formation">Maintain Formation</h3> <p>The images below show the robot system maintaining its rectangular formation while rotating.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/rotate_ccw.gif-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/rotate_ccw.gif-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/rotate_ccw.gif-1400.webp"></source> <img src="/assets/img/project/svf/rotate_ccw.gif" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Maintain Formation, Then Rotate" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Maintain rectangle formation, then rotate counterclockwise. </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/rotate_cw.gif-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/rotate_cw.gif-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/rotate_cw.gif-1400.webp"></source> <img src="/assets/img/project/svf/rotate_cw.gif" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Maintain Formation, Then Rotate" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Maintain rectangle formation, then rotate clockwise. </div> </div> </div> <p>The images below show the robot system maintaining its rectangular formation while moving.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/forward.gif-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/forward.gif-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/forward.gif-1400.webp"></source> <img src="/assets/img/project/svf/forward.gif" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Maintain Formation, Then Move" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Maintain rectangle formation, then move forward. </div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project/svf/backward.gif-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project/svf/backward.gif-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project/svf/backward.gif-1400.webp"></source> <img src="/assets/img/project/svf/backward.gif" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Maintain Formation, Then Move" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption"> Maintain rectangle formation, then move backward. </div> </div> </div> </article><div id="giscus_thread"> <script>let giscusTheme=localStorage.getItem("theme"),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"doublehan07/doublehan07.github.io","data-repo-id":"","data-category":"Comments","data-category-id":"","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,e])=>giscusScript.setAttribute(t,e)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Han Zhang. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: December 03, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>